---
layout: post
title: 재시작
date: 2017-02-11 20:00:00 +0900
tags: [markdown, pouchdb, milestone]
---

3주만의 포스팅입니다. 이제 졸업이 멀지않은 듯합니다. 물론 아직 졸업까지 신경쓰이는 부분이 있긴 하지만 큰 태스크들은 거의 끝났기 때문에 별 문제는 없을겁니다. 앞으로 남은 일들은 졸업논문 수정, 발표 그리고 일본에서의 생활 정리가 되겠네요.

여튼 오늘 포스트의 주제는 앞으로 무엇을 목표로 달려가느냐에 대한 설정입니다. 딱히 2017년 목표는 아니고 일단 해볼려고 하는 것들에 대해 정리해보고 싶네요.

먼저 주력으로 해볼 생각인 것들은 다음과 같습니다.

- GUI 마크다운 에디터
- 파우치DB 호스팅 서비스
- 캘린더앱??

그럼 하나씩 설명부터 해봅니다.

# GUI 마크다운 에디터

편집부분과 독립된 렌더러를 가지지 않는 마크다운 에디터를 만들 생각입니다. 신택스 부분까지 숨겨서 유저입장에선 거의 MS 워드를 사용하는 느낌이 들 정도까지 해보고 싶네요.

## 배경

개인적으로 오랜 숙원이기도 합니다. 마크다운 글을 작성할떄 프리뷰를 볼 수가 없다 라는... 물론 프로그래머에겐 그렇게 치명적인 문제가 아닌듯 하지만 실질적으로 내가 적고있는 마크다운 신택스가 제대로 작동한다는 보장이 없는 스트레스는 마크다운을 작성하는 누구든 은연중에 크게 느끼고 있을 것입니다. 그럼에도 불구하고 천하의 깃허브조차 프리뷰버튼을 따로 두고 있는게 현 실정입니다. 개인적으로 깃허브가 아톰에디터처럼 총대매고 개발 해 주었으면 하지만 아직 그럴 조짐은 없어 보이네요...

## 개발의 어려움

그럴 조짐이 없어보이는 이유는 간단합니다. 개발 코스트가 너무 큽니다. 단편적인 예를 들면 WYSIWYG HTML 에디터를 개발하는 것과 비슷합니다. 아마 자바스크립트기반의 이런 에디터를 프로젝트에 써보셧으면 무언가 부족한 부분이 계속 느껴지셧을 겁니다. 그리고 쓸만한건 대부분 상용으로 배포되는게 많죠... 좀 더 구체적인 이유를 들자면 다음과 같습니다. 물론 이외에도 많겠지만 일단 생각나는 것만 열거해볼게요.

### 마크다운에 대한 이해도

먼저 마크다운을 어떻게 쓰느냐와 어떻게 렌더링하느냐는 필요 이해도에 있어서 상당한 차이를 보입니다. 가령 blockquote 내부에 테이블이나 코드펜스를 렌더하는게 가능한가? 라든가 코드펜스 내부에 백틱<code>```</code>을 이스케이프 시키거나... 또한 망가진 신택스는 어떻게 처리해야하는가 등등...

### 마크다운 파편화

너무 다양한 마크다운이 존재합니다. 물론 유명한것만 따지면 Github Flavored Markdown이나 CommonMark등이 있겠네요.... 게다가 이를 지원한다고 하는 대부분의 서비스나 파서들은 다양한 추가기능을 제공하고 있죠...

일단 기본이 되는건 [daringfireball의 마크다운 프로젝트](http://daringfireball.net/projects/markdown/)입니다.

### 사용성(UX)

마크다운의 큰 강점인 간단한 신택스만으로 서식이 설정된건 무조건 살려야합니다. 더 나아가 모든 조작은 키보드 만으로도 충분히 가능해야하며 직관적이어야 합니다.
왠지 20년전의 도스 기반의 한컴 오피스가 떠오르네요... 그리고 분명히 VI나 Emacs커맨드에 대응해라는 니즈역시 나타날 것입니다.

동시에 GUI인터페이스의 고려역시 필요합니다. 테이블 편집은 어떤 형식으로 할것인가? 레이텍 작성은 어떻게 할것인가? 혹시 레이텍 코드에 에러가 발견되면 어떻게 핸들링 할 것인가?

### 출력방식

각 블록별로 어떻게 다뤄야 할지도 고려가 필요합니다. 앞서말한 백틱의 경우 일반적인 코드 신택스를 쓸떈 <code>&grave;인라인 코드&grave;</code>로 작성하면 되지만 백틱이 포함된 인라인 코드의 경우 <code>&lt;code&gt;&grave;백틱이 포함된 인라인 코드&grave;&lt;/code&gt;</code>로 작성해야 합니다.

<blockquote>
이 글 또한 마크다운이다보니 이미 이 글자체에서 인라인 코드에 코드태그와 백틱까지 같이 쓰고 있네요... 참고로 <code>&lt;code&gt;&grave;백틱이 포함된 인라인 코드&grave;&lt;/code&gt;</code>의 RAW버젼은 다음과 같습니다.
<pre>
&lt;code&gt;&amp;lt;code&amp;gt;&amp;grave;백틱이 포함된 인라인 코드&amp;grave;&amp;lt;/code&amp;gt;&lt;/code&gt;
</pre>
</blockquote>

### 다양한 사용환경

OS마다 브라우저마다 언어별 입력기 마다 다양한 행동을 보여줍니다. 이를 모두 추적하는건 혼자 힘으론 불가능에 가깝고 상당히 피곤한 일입니다. 아마 저도 혼자서 해결할 수는 없을 겁니다. 그래서 이 프로젝트가 오픈소스여야 하는 이유이기도 하죠. 먼저 영어와 CJK를 우선적으로 처리할 계획입니다. OS는 윈도우즈, macOS 그리고 일부 리눅스에 대해서만 행해질 겁니다.

## 계획

일단 총체적인 계획은 다음과 같습니다.

- 전용 마크다운 스펙
- 파서/렌더러
- CLI툴
- 데스크톱 에디터
- 모바일 에디터

전용 스펙을 따로 만들어야하는건 필연적입니만 물론 또 다른(Yet Another) 스펙을 만든다라는 것과는 거리가 멉니다. 엄밀하게 말해 사용성을 보증한다는 것에 가깝습니다. 먼저 GFM의 경우 깃허브에서 폭넓게 이용되고 있고 간편히 Gist에 작성해보는 걸로 결과물을 알 수 있지만, 스펙이 존재하지 않습니다... 간단한 사용 가이드가 전부이므로 복잡한 신택스 작성시 결과물이 어떻게 될지는 예측하는건 야바위랑 다를 바 없습니다. 결국 프리뷰를 몇번이고 번갈아가며 확인 할 수 밖에 없게되죠... 이에 대해 CommonMark에서 깨끗하게 스펙을 만들어 두긴 했지만 Emoji나 레이텍같은 부분은 마크다운의 기능으로 고려하지 않고 있기에 이들에 대한 스펙역시 필요합니다. 또한 Data Model Langauge를 활용한 다이어그램 작성(플로우차트 시퀸스 다이어그램을 추가기능으로 고려중입니다.)같은 추가기능을 고려하고 있기에 이들에 대한 스펙역시 필요합니다.

### 개발적인 측면

먼저 Wooorm/Remark를 사용할 계획입니다. Babel처럼 마크다운을 AST화 시켜주기 때문에 좀더 유연하고 효과적으로 마크다운을 관리 할 수 있을겁니다. 또한 린터까지 고려되어 있기 때문에 유저가 넣어준 마크다운 코드에 대해 잘못된 부분이 있을 경우 쉽게 피드백까지 해줄 수 있을겁니다.

에디터 내부적으론 데이터를 마크다운 그대로가 아니라 블록을 오브젝트(JSON)상태로 만들어 관리할 생각입니다. 이게 편한게 유저의 신택스 실수를 고려할 필요가 없게 되기도 하고 편집할 때마다 마크다운을 통째로 다시 렌더링 하는 코스트도 없을 겁니다.

마지막으로... 개발은 리액트로 할 생각입니다.

# 파우치DB 호스팅 서비스

깃허브에서 Git 저장소를 호스팅하는 것처럼 PouchDB를 호스팅해주는 서비스를 만들 생각입니다.

아마 제 첫 사업이 될 것입니다.

## 파우치DB?

파우치 DB는 카우치 DB와 호환가능한 자바스크립트 기반의 데이터베이스입니다.

먼저, 어디에서든지 쓸 수 있습니다. 자바스크립트로 작성됬기때문에 브라우저에서도 사용이 가능하고 Node.js를 통해 어떤 앱에서도 활용이 가능합니다.

그리고, 다양한 어댑터를 지원합니다. IndexedDB와 LevelDB를 지원하기 때문에 정말 다양한 데이터베이스를 저장소로 활용 할 수 있습니다.

둘째로 카우치DB와 호환가능하기 때문에 동기화옵션이 기본적으로 따라옵니다. 서버와 접속이 끊어져도 데이터베이스는 지속적으로 사용이 가능합니다.

## 어떻게 만드냐

ServerLess와 IBM Cloudant를 활용해서 만들 계획입니다.

제가 제공하는 모든 API는 서버리스로 AWS람다에서 제공하고, 클라우던트를 통해 파우치 DB를 호스팅 합니다. 제가 실질적으로 개발하는 부분은 인증, 과금부분입니다.

## 왜 만드냐

개발자를 위한 DB가 아니라 사용자를 위한 DB를 제공하고 싶습니다.

기존 DB의 경우 개발자가 서비스를 제공하기 위해 사용될 뿐이기 때문에 사용자입장에선 블랙박스에 가깝죠... 이에 항상 서비스가 제공하는 인터페이스로밖에 접근이 불가능하기에 유저가 서비스를 완전히 이해하지 않고는 그 데이터베이스를 제대로 활용하기 힘들어집니다.

물론 일반 유저가 데이터베이스 스키마에대해 알 필요가 있느냐? 라고 질문 받을 수도 있습니다. 네, 알 필요가 있습니다. 엄밀하게 말해 유저가 몰라도 되는건 `스키마`, `테이블`, `칼럼` 같은 용어일 뿐입니다. 이미 그들은 스키마에 대한 개념을 이해 하고 있습니다. 프로그래밍따위 모르는 전업주부라도 가계부에 `지출`, `수입`으로 나누어서 데이터를 관리 할 줄 압니다.

또한 사용자에게 데이터베이스의 존재를 실감시켜 자신의 통제권안에 있다는 걸 알려주고 싶습니다. 어디에 어떻게 저장되는지를 명확하게 알 수 있게함으로써 보안적으로도 좀 더 능동적으로 대처 할 수 있게되고 스스로 좀더 다양한 시도를 하게 해줄 겁니다.

또 다른 문제로 데이터베이스의 호스팅 난이도가 있습니다. MySQL조차 리눅스를 어느 정도 다를 줄 모르면 호스팅을 할 수 없습니다. 그리고 안다고 해도 리눅스 셋업이 그렇게 유쾌하진 않죠.. 대부분 리눅스 셋업을 일관화시켜서 쓰는 사람들은 인프라 개발자정도이기도 하고요... 이제 시대가 바뀌었기에 AWS처럼 간단한 클릭몇번으로 할 수 있게 해야한다고 생각합니다.

## 왜 사업아이템을 공개하는가

먼저, 제 새로운 철학을 시험해 보고 싶습니다. 투명성은 정보적 우위를 통한 경쟁성을 포기하는 비즈니스적인 측면에서는 자살행위인듯 해 보이지만 거국적으로 생각합시다. 저의 아이디어를 따라하는 사람이 많을 수록 더 많은 사람들이 자신통제하의 DB를 가지기 쉬워질것이고 IT에 대한 일반인들의 수준은 더욱 높아질 것입니다. 테슬라가 기술 공개하는 것과 비슷하겠네요. 저는 이 사업에 실패 할 지 모르지만 이로써 득을 볼 이는 훨씬 많을 것입니다.

둘째, 저는 아직 혼자입니다. 앞으로 저와 함께 할 이는 저의 생각방식에 공감하는 사람이 될것입니다. 그리고 그 생각방식이 가장 투영될 것이 바로 제가 앞으로 만들어 나갈 사업아이템이고 이를 숨긴다는건 오히려 좋은 사람을 만날 기회를 버리는 것이 된다고 생각합니다.

# 캘린더앱??

새로운 어플리케이션 역시 생각하고 있습니다. macOS의 리마인더와 캘린더가 조합된 물건으로 단순하게 이벤트나 할일 목록을 넣는 앱이 아니라 시간에 대한 기록을 남기는데 중점을 둔 좀 더 원시적인 욕구를 만족시키는 어플리케이션을 만들려고 합니다.

리액트와 일렉트론 파우치DB로 만들 계획이며 웹앱과 모바일 앱역시 만들 계획입니다.

이 앱의 경우에는 장황하게 설명하는 것보다 직접 쓰는걸 보는게 빠르니 프로토타입이 나올떄 좀더 자세한 설명을 해드릴게요.

여기서 설명해드리고 싶은건 본 앱의 주 목적은 단순한 기능이아니라 **레퍼런스급** 일렉트론/리액트 앱을 개발하는 것입니다.

아마도 많은 분들이 어떻게 일렉트론이나 리액트를 활용하여 앱을 만드는지 궁금하실 것이지만 리액트나 일렉트론 모두 개발예제가 난잡하고 특히 리액트는 각종 보일러 플레이트가 난무해서 정말 좋은 설계 라는걸 찾기가 어렵습니다.

그리고 프로덕션 레벨의 앱개발에 필요로하는 테스트부터 배포까지 철저하게 노하우를 정리할 것이고 이러한 앱개발에 있어서의 머리부터 발끝까지의 부분을 튜토리얼로 만듬으로써 좀 더 많은 사람들이 아름다운 코드를 쓰고 효과적으로 자신의 창의력을 활용 할 기회를 제공하고 싶습니다.

아, 이 프로젝트의 경우 이름은 정해졌습니다. **Fourteen**으로 방사성 탄소 연대 측정법에 사용되는 탄소14의 번호 14를 의미합니다.

# 대략적인 목표

20일간 쌓인 생각들을 풀어해치니 양이 엄청나군요... 머리속엔 아직 이거 몇배분은 남아 있지만 위의 내용에 비해 상대적으로 트리비얼하므로 다음에 얘기하도록 합시다.

대략적인 일정은 3가지 모두 프로토타입을 3월부터 시작해서 6월중까지 완성시키는걸 목적으로 합니다.

먼저 우선적으로 기반지식과 노하우의 확보에 주력할 생각입니다. PouchDB를 좀더 자세히 알기위해 코드를 뜯어봐야 하는 것도 있고 카우치DB에 대한 깊은 이해역시 필요합니다. 그리고, 서버리스에 대해서도 안정적인 활용을 위해 실제 활용한 경험을 늘려야합니다. 아마 여기에 1달정도 필요할 듯 하네요.

실질적인 개발은 단순 프로토타입수준이면 각각 2주정도면 충분할 듯 합니다. 아마 이게 완성된 다음부터 구체적인 플랜을 짤 수 있겠네요. 해보기 전까진 어떤 함정이 도사릴지 모르니까요!

여튼 조금씩 생각이 정리되는 대로 공개해나갈 생각입니다.
