<!DOCTYPE html><html><head><link href="https://fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Mono:400,700&amp;display=swap" rel="stylesheet"/><link href="/static/highlight.js-style.css" rel="stylesheet"/><link href="/static/nprogress.css" rel="stylesheet"/><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/><meta charSet="utf-8"/><title>Babel ÌîåÎü¨Í∑∏Ïù∏ÏùÑ ÎßõÎ≥¥Îã§! - Rokt33r&#x27;s Lab</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/hJFE1lH2cjGqLP7DAhCBs/pages/posts/try-to-build-babel-plugin.js" as="script"/><link rel="preload" href="/_next/static/hJFE1lH2cjGqLP7DAhCBs/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-035ac2b14bde147cb4a8.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.dadd45e9201230d990bd.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-7ca00c6bb257c339c190.js" as="script"/><style data-styled="ijBIBD bGtRax ZcuXL bFzqVn jvtQSp duzMXu imLHoO khOcGh cIPQpY faxsgW cBpAQI jElRzS dmRTOV kIQyjW hTttFt dzOVWf bHjSGl bkLTDX bHnRqI AbyuT lnSrVR cIsEXH eVchTb cCDORr epuZnG krCIxR idgQDO hhtWEn" data-styled-version="4.3.2">
/* sc-component-id: Box-sc-1eapbbj-0 */
.cBpAQI{font-size:20px;}.dmRTOV{margin-top:16px;}.kIQyjW{margin-top:64px;margin-bottom:64px;}
/* sc-component-id: Flex-ikisgz-0 */
.ijBIBD{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.bGtRax{margin-left:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.ZcuXL{padding-left:8px;padding-right:8px;margin-bottom:32px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:left;-webkit-box-align:left;-ms-flex-align:left;align-items:left;} @media screen and (min-width:40em){.ZcuXL{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}} @media screen and (min-width:40em){.ZcuXL{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}}.bFzqVn{margin-top:4px;margin-bottom:4px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;} @media screen and (min-width:40em){.bFzqVn{margin-top:0;margin-bottom:0;}}.jvtQSp{margin-right:8px;margin-top:4px;margin-bottom:4px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;} @media screen and (min-width:40em){.jvtQSp{margin-top:0;margin-bottom:0;}}.duzMXu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: sc-global-80780910 */
*{box-sizing:border-box;} body{margin:0;color:#111111;font-family:Ubuntu,sans-serif;line-height:1.625;}
/* sc-component-id: Text-sc-10chyw1-0 */
.bHjSGl{margin-left:8px;margin-left:8px;}.bkLTDX{margin-left:4px;margin-right:8px;margin-left:4px;margin-right:8px;}.bHnRqI{padding-top:0;padding-bottom:0;margin-left:4px;margin-right:4px;padding-top:0;padding-bottom:0;margin-left:4px;margin-right:4px;}.AbyuT{color:#777;margin-right:8px;color:#777;text-align:center;margin-right:8px;}.lnSrVR{color:#777;text-align:center;color:#777;}
/* sc-component-id: Link-sc-6f9keh-0 */
.eVchTb{-webkit-text-decoration:none;text-decoration:none;color:#0074D9;} .eVchTb:hover{-webkit-text-decoration:underline;text-decoration:underline;}.cCDORr{-webkit-text-decoration:none;text-decoration:none;margin-top:4px;margin-bottom:4px;color:#0074D9;} .cCDORr:hover{-webkit-text-decoration:underline;text-decoration:underline;} @media screen and (min-width:40em){.cCDORr{margin-top:0;margin-bottom:0;}}.epuZnG{-webkit-text-decoration:none;text-decoration:none;margin-right:8px;color:#0074D9;} .epuZnG:hover{-webkit-text-decoration:underline;text-decoration:underline;}
/* sc-component-id: Container-sc-8y0ptr-0 */
.cIsEXH{margin-top:16px;margin-left:auto;margin-right:auto;padding-left:8px;padding-right:8px;padding-bottom:128px;width:100%;max-width:52em;} @media screen and (min-width:40em){.cIsEXH{margin-top:0;padding-left:32px;padding-right:32px;}}
/* sc-component-id: Navigator__NavContainer-g39amz-0 */
.imLHoO{width:100%;position:fixed;background-color:#FFFFFF;top:0;height:inherit;} @media screen and (min-width:40em){.imLHoO{width:256px;position:-webkit-sticky;position:sticky;height:100vh;}}
/* sc-component-id: Navigator__NavLinkList-g39amz-1 */
.faxsgW{list-style:none;padding:0;margin:0;display:none;} @media screen and (min-width:40em){.faxsgW{display:block;}}
/* sc-component-id: Navigator__NavControl-g39amz-2 */
.khOcGh{display:block;} @media screen and (min-width:40em){.khOcGh{display:none;}}
/* sc-component-id: Navigator__Avartar-g39amz-3 */
.dzOVWf{width:20px;margin-right:8px;}
/* sc-component-id: Navigator__NavControlButton-g39amz-4 */
.cIPQpY{padding-top:4px;padding-bottom:4px;border:none;background-color:white;outline:none;font-size:1.4em;}
/* sc-component-id: Navigator___StyledText-g39amz-5 */
.hTttFt{color:#777;padding-left:16px;padding-top:4px;padding-bottom:4px;color:#777;-webkit-text-decoration:none;text-decoration:none;font-family:'Ubuntu Mono',monospace;padding-left:16px;padding-top:4px;padding-bottom:4px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:background-color ease-in-out 200ms;transition:background-color ease-in-out 200ms;} .hTttFt:hover{background-color:rgba(0,0,0,0.1);-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: MarkdownBox-sc-14qyz5r-0 */
.hhtWEn{margin-bottom:64px;overflow-wrap:break-word;} .hhtWEn a{color:#0074D9;-webkit-text-decoration:none;text-decoration:none;} .hhtWEn a:hover{-webkit-text-decoration:underline;text-decoration:underline;} .hhtWEn blockquote{border-left:#0074D9 4px solid;margin-left:0;padding:0.125em 1em;} .hhtWEn pre code.hljs{display:block;padding:1.5em;border:#0074D9 2px dashed;} .hhtWEn code:not(.hljs){background-color:rgba(0,0,0,0.1);padding:0.2em 0.4em;}
/* sc-component-id: PostMeta__MetaLink-sc-1orgltw-0 */
.idgQDO{color:inherit;} .idgQDO:hover{color:#0074D9;}
/* sc-component-id: Heading-sc-13779ev-0 */
.krCIxR{font-size:48px;margin-top:0;margin-bottom:16px;font-size:48px;margin-top:0;margin-bottom:16px;font-weight:bold;}</style></head><body><div id="__next"><div class="Box-sc-1eapbbj-0 Flex-ikisgz-0 ijBIBD"><div width="1,256" height="inherit,100vh" class="Navigator__NavContainer-g39amz-0 imLHoO"><div display="block,none" class="Navigator__NavControl-g39amz-2 khOcGh"><button class="Navigator__NavControlButton-g39amz-4 cIPQpY"><svg viewBox="0 0 24 24" style="width:1em;height:1em" role="presentation"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" style="fill:black"></path></svg></button></div><ul display="none,block" class="Navigator__NavLinkList-g39amz-1 faxsgW"><li font-size="3" class="Box-sc-1eapbbj-0 cBpAQI"><a color="#777" text-decoration="none" href="/" class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 Navigator___StyledText-g39amz-5 hTttFt"><img src="https://avatars3.githubusercontent.com/u/5865853?s=40&amp;v=4" width="20" height="20" class="Box-sc-1eapbbj-0 Navigator__Avartar-g39amz-3 dzOVWf"/>Rokt33r&#x27;s Lab</a></li><li class="Box-sc-1eapbbj-0 jElRzS"><a color="#777" text-decoration="none" href="/about" class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 Navigator___StyledText-g39amz-5 hTttFt">üë®‚ÄçüöÄ /about</a></li><li class="Box-sc-1eapbbj-0 jElRzS"><a color="#777" text-decoration="none" href="/posts" class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 Navigator___StyledText-g39amz-5 hTttFt">üìù /posts</a></li><li class="Box-sc-1eapbbj-0 jElRzS"><a color="#777" text-decoration="none" href="/categories/dev" class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 Navigator___StyledText-g39amz-5 hTttFt"><div class="Box-sc-1eapbbj-0 Flex-ikisgz-0 bGtRax"><svg viewBox="0 0 24 24" style="width:12px;height:12px" role="presentation"><path d="M3,3H9V7H3V3M15,10H21V14H15V10M15,17H21V21H15V17M13,13H7V18H13V20H7L5,20V9H7V11H13V13Z"></path></svg><div class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 bHjSGl">dev</div></div></a></li><li class="Box-sc-1eapbbj-0 jElRzS"><a color="#777" text-decoration="none" href="/categories/dev-kor" class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 Navigator___StyledText-g39amz-5 hTttFt"><div class="Box-sc-1eapbbj-0 Flex-ikisgz-0 bGtRax"><svg viewBox="0 0 24 24" style="width:12px;height:12px" role="presentation"><path d="M3,3H9V7H3V3M15,10H21V14H15V10M15,17H21V21H15V17M13,13H7V18H13V20H7L5,20V9H7V11H13V13Z"></path></svg><div class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 bHjSGl">dev-kor</div></div></a></li></ul></div><div width="1" class="Box-sc-1eapbbj-0 Container-sc-8y0ptr-0 cIsEXH"><div class="Box-sc-1eapbbj-0 dmRTOV"><a color="blue" href="/" class="Link-sc-6f9keh-0 eVchTb">Home</a></div><h1 font-size="6" font-weight="bold" class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 Heading-sc-13779ev-0 krCIxR">Babel ÌîåÎü¨Í∑∏Ïù∏ÏùÑ ÎßõÎ≥¥Îã§!</h1><div class="Box-sc-1eapbbj-0 Flex-ikisgz-0 ZcuXL"><div class="Box-sc-1eapbbj-0 Flex-ikisgz-0 bFzqVn"><svg viewBox="0 0 24 24" style="width:12px;height:12px" role="presentation"><path d="M3,3H9V7H3V3M15,10H21V14H15V10M15,17H21V21H15V17M13,13H7V18H13V20H7L5,20V9H7V11H13V13Z"></path></svg><div class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 bkLTDX"><a href="/categories/dev-kor" class="PostMeta__MetaLink-sc-1orgltw-0 idgQDO">dev-kor</a></div></div><div class="Box-sc-1eapbbj-0 Flex-ikisgz-0 jvtQSp"><div class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 bHnRqI">#<!-- -->babel</div><div class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 bHnRqI">#<!-- -->webpack</div><div class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 bHnRqI">#<!-- -->react</div></div><a href="https://github.com/Rokt33r/blog/edit/master/pages/posts/try-to-build-babel-plugin.md" target="_blank" color="blue" class="Link-sc-6f9keh-0 cCDORr">Suggest Edit</a></div><div class="Box-sc-1eapbbj-0 MarkdownBox-sc-14qyz5r-0 hhtWEn"><p>Í∞úÏù∏Ï†ÅÏúºÎ°ú <a href="https://facebook.github.io/react/docs/handling-events.html">Î¶¨Ïï°Ìä∏ Í≥µÏãù ÌäúÌÜ†Î¶¨ÏñºÏùò Î∞©Ïãù</a>Ïù¥ ÎßàÏùåÏóê Îì§ÏßÄÏïäÏïòÏñ¥Ïöî.
Í∑∏ÎûòÏÑú Ïª®Ïä§Ìä∏Îü≠ÌÑ∞Ïóê Ïï†Î°úÏö∞ÌéëÏÖòÏùÑ ÎÑ£Ïñ¥ÏÑú Îî∞Î°ú Î∞îÏù∏Îìú ÏóÜÏù¥ Ïì∞Îäî Î∞©ÏãùÏùÑ ÏãúÎèÑÌï¥Î≥¥ÏïòÎäîÎç∞ ÏûëÎèôÏùÄ ÌïòÏßÄÎßå React Hot Loader 3(Ïù¥Ìïò RHL3)Í∞Ä Ï†úÎåÄÎ°ú ÏõÄÏßÅÏù¥ÏßÄ ÏïäÎçîÎùºÍ≥†Ïöî.</p><pre><code class="hljs language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoggingButton</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span> (props) {
    <span class="hljs-keyword">super</span>(props)
    <span class="hljs-comment">// Ïù¥Î†áÍ≤å !!</span>
    <span class="hljs-keyword">this</span>.handleClick = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;this is:&#x27;</span>, <span class="hljs-keyword">this</span>);
    }
  }

  render() {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleClick}</span>&gt;</span>
        Click me
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
    );
  }
}
</code></pre><p>Í∑∏ÎûòÏÑú <a href="https://github.com/gaearon/react-hot-loader/issues/427">Ïù¥Ïäà</a>Î•º Îì±Î°ùÌñàÎäîÎç∞ ÏïÑÎ¨¥ÎûòÎèÑ Î©îÏù∏ÌÖåÏù¥ÎÑàÎ∂ÑÎì§Ïù¥ Îã§Î•∏ ÏùºÎ°ú Î∞îÏÅòÏÖîÏÑú ÎåÄÏùëÏù¥ ÏïàÎêòÎäîÎìØ ÌïòÏÖ®Ïñ¥Ïöî. Í∑∏ÎÇòÎßà Îã§ÌñâÏù∏Í±¥ Ïñ¥ÎîîÎ•º Î≥¥Î©¥ Îã§Î£∞ Ïàò ÏûàÎäîÏßÄÎäî ÏïåÎ†§Ï£ºÏÖ®Ïñ¥Ïöî. Î¨ºÍ≥†Í∏∞Î•º Ï£ºÎäî ÎåÄÏã† Î¨ºÍ≥†Í∏∞Î•º Ïû°ÎäîÎ≤ïÏùÑ ÏïåÎ†§Ï£ºÎäî Í≤ÉÏ≤òÎüº! :fishing_pole_and_fish::fishing_pole_and_fish::fishing_pole_and_fish:</p><h2>Ï∞∏Í≥†ÏûêÎ£å</h2><p>Îã§Ïùå 3Í∞úÏùò ÎßÅÌÅ¨Í∞Ä Ï†úÍ∞Ä Î∞õÏùÄ Î∂ÄÎ∂ÑÏûÖÎãàÎã§.</p><ul><li><a href="https://github.com/thejameskyle/babel-handbook">Î∞îÎ≤® Ìï∏ÎìúÎ∂Å</a></li><li><a href="https://astexplorer.net/">AST Explorer</a></li><li><a href="https://github.com/babel/babel/tree/master/packages/babel-types">Babel types</a></li></ul><p>Î∞îÎ≤®Ìï∏ÎìúÎ∂ÅÏùÄ Î∞îÎ≤® ÏÇ¨Ïö©Î≤ïÏùÄ ÌïúÍ∏ÄÌôî ÎêòÏñ¥ÏûàÎäîÎç∞ ÌîåÎü¨Í∑∏Ïù∏ÏùÄ ÏïÑÏßÅ ÌïúÍ∏ÄÌôî ÎêòÏñ¥ÏûàÏßÄ ÏïäÏïòÏñ¥Ïöî. Î≠ê Îî±Ìûà ÏïàÎ≥¥ÏÖîÎèÑ Í¥úÏ∞¨ÏïÑÏöî. ÏóÑÏ≤≠ Í∏∏Í∏∞ÎèÑÌïòÍ≥† Ïù¥ Ìè¨Ïä§Ìä∏ÎèÑ Í∞ÑÎã®ÌïòÍ≤å Î∞îÎ≤®Ïù¥ Ïñ¥ÎñªÍ≤å ÏΩîÎìúÎ•º Ìä∏ÎûúÏä§ÌååÏùºÌïòÎäîÏßÄ Í∞ÄÎ≥çÍ≤å ÎßõÎßåÎ≥¥ÎäîÍ±∏ Î™©ÌëúÎ°ú ÌïòÎãàÍπåÏöî. :smile:</p><p>ÌïòÏßÄÎßå, AST ExplorerÎäî Íº≠ Ïç®Î≥¥ÏÖîÏïº Ìï©ÎãàÎã§!</p><p>ASTÎäî Ï†ïÎßê Î≥µÏû°ÌïòÍ∏∞ ÎïåÎ¨∏Ïóê Ïù¥Í≤åÏóÜÏúºÎ©¥ Î≠êÍ∞Ä Ïñ¥ÎîîÏûàÎäîÏßÄ ÌååÏïÖÌïòÍ∏∞ Ï†ïÎßê Ïñ¥Î†§ÏõåÏ†∏Ïöî. Î¨ºÎ°† ÏùµÏàôÌï¥ÏßÄÎ©¥ ÌïÑÏöîÏóÜÍ≤†ÏßÄÎßå Ï≤òÏùåÎã§Î£®ÏãúÎ©¥ Íº≠ Ïó¨Í∏∞Ïóê ÏòàÏ†úÏΩîÎìú ÎÑ£Ïñ¥Î≥¥ÏÑ∏Ïöî!
ÎÑ£Í≥† Ïª§ÏÑúÎ•º ÏõÄÏßÅÏù¥Î©¥ ÏßÄÍ∏à ÏÑ†ÌÉùÌïú Î∂ÄÎ∂ÑÏù¥ Ïñ¥ÎñªÍ≤å ÌååÏã±ÎêòÏñ¥ÏûàÎäîÏßÄ Í∞ÑÎã®Ìûà Ïïå Ïàò ÏûàÏäµÎãàÎã§!</p><p><img src="/assets/images/ast-explorer.png" alt="AST Explorer"/></p><blockquote><p>Î∞îÎπåÎ°† Î≤ÑÏ†ºÎ≥ÑÎ°ú ÏïΩÍ∞Ñ ÌÉÄÏûÖÏù¥Î¶ÑÏù¥ Îã§Î•¥ÎØÄÎ°ú Íº≠ <strong>Î∞îÎπåÎ°†6</strong>Î•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî!</p></blockquote><p>Babel Types Ïó≠Ïãú ÌîåÎü¨Í∑∏Ïù∏ Ìé∏ÏßëÌï†Îïê Ï°¥Ïû¨ÌïòÎäî Î™®Îì† Ïã†ÌÉùÏä§ ÎÖ∏ÎìúÍ∞Ä Ï†ïÎ¶¨ÎêòÏñ¥ÏûàÍ∏∞ ÎïåÎ¨∏Ïóê ÏÇ¨Ï†ÑÏ≤òÎüº Í≥ÑÏÜç Î≥¥ÏÖîÏïºÌï©ÎãàÎã§.
Ïù¥ Î™®ÎìàÏùÄ ÏùºÏ¢ÖÏùò Ìó¨ÌçºÎ°úÏÑú Í∞ÑÎã®Ìûà Ïã†ÌÉùÏä§ ÎÖ∏ÎìúÎ•º ÏÉùÏÑ±ÌïòÍ±∞ÎÇò ÎÖ∏ÎìúÏóê ÎåÄÌïú ÌÖåÏä§Ìä∏Í∞Ä Í∞ÄÎä•Ìï©ÎãàÎã§.</p><h2>ÏΩîÎìú</h2><p>Ïù¥Í≤å Ï†úÍ∞Ä Ïì¥ ÏΩîÎìúÏùò PRÏûÖÎãàÎã§! <a href="https://github.com/gaearon/react-hot-loader/pull/464/files">#464</a></p><p>Î®ºÏ†Ä Î™©ÌëúÌôïÏù∏ÏùÑ ÏúÑÌï¥ ÌÖåÏä§Ìä∏ ÏΩîÎìúÎ∂ÄÌÑ∞ Î¥ÖÏãúÎã§. ÌÖåÏä§Ìä∏Îäî ÌïÑÏä§Ï≥êÎ°ú Ïª¥ÌååÏùº Ï†Ñ ÏΩîÎìúÏôÄ Ïª¥ÌååÏùºÎêú ÌõÑÏùò ÏΩîÎìúÎ•º ÎëêÍ≥† Ïù¥ ÌîΩÏä§Ï≥êÎì§ÏùÑ <code>fs.readdir</code>Î°ú Î∂àÎü¨ ÏùºÍ¥ÑÏ≤òÎ¶¨ÌïòÎäî ÌòïÏãùÏù¥ÏóàÏäµÎãàÎã§.</p><p>Î®ºÏ†Ä Ïª¥ÌååÏùº Ï†Ñ ÏΩîÎìúÏûÖÎãàÎã§.</p><pre><code class="hljs language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> </span>{
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.onClick = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> e.target.value
  }
}
</code></pre><p>Ïª¥ÌååÏùº Îêú ÌõÑÏùò ÏΩîÎìúÏûÖÎãàÎã§. Í≥†Î°ú Ïö∞Î¶¨Îäî ÏúÑÏùò ÏΩîÎìúÎ•º Î∞ëÏúºÎ°ú Î∞îÍøîÏç®Ï£ºÎäî Ìä∏ÎûúÏä§ÌååÏùºÎü¨Î•º ÎßåÎì§Î©¥ Îê©ÎãàÎã§.</p><p>Ïª®Ïä§Ìä∏Îü≠ÌÑ∞Îäî Ï≤òÏùå ÎßàÏö¥Ìä∏ Îê†ÎïåÎßå Ïã§ÌñâÎêòÍ≥†, Î¶¨Î°úÎìúÏãúÏóêÎäî ÌÅ¥ÎûòÏä§ Î©îÏÜåÎìúÏùò Î¶¨Î°úÎìúÎßå ÏùºÏñ¥ÎÇòÍ∏∞ ÎïåÎ¨∏Ïóê, Ïª®Ïä§Ìä∏Îü≠ÌÑ∞ÎÇ¥Î∂ÄÏùò Î©îÏÜåÎìúÎ•º Î∞îÍπ•ÏúºÎ°ú Í∫ºÎÇ¥Ï£ºÍ≥† ÏïàÏóêÏÑúÎäî Í∫ºÎÇ∏ ÏΩîÎìúÎ•º Î∂ÄÎ•¥ÎèÑÎ°ù Ìï®ÏúºÎ°úÏÑú, Î¶¨Î°úÎìúÏãú Ïª®Ïä§Ìä∏Îü≠ÌÑ∞Í∞Ä Îã§Ïãú ÌïúÎ≤à Î∞îÏù∏Îìú Ìï† ÌïÑÏöîÏóÜÏù¥ ÏÉàÎ°≠Í≤å Î¶¨Î°úÎìúÎêú Î©îÏÜåÎìúÎ•º Ïû¨ÏÇ¨Ïö© Ìï† Ïàò ÏûàÍ≤åÎê©ÎãàÎã§.</p><pre><code class="hljs language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> </span>{
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.onClick = <span class="hljs-function">(<span class="hljs-params">...params</span>) =&gt;</span> <span class="hljs-keyword">this</span>.__onClick__REACT_HOT_LOADER__(...params);
  }

  __onClick__REACT_HOT_LOADER__(e) {
    <span class="hljs-keyword">return</span> e.target.value;
  }

}
;

<span class="hljs-keyword">var</span> _temp = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> __REACT_HOT_LOADER__ === <span class="hljs-string">&#x27;undefined&#x27;</span>) {
    <span class="hljs-keyword">return</span>;
  }

  __REACT_HOT_LOADER__.register(Foo, <span class="hljs-string">&quot;Foo&quot;</span>, __FILENAME__);
}();

;
</code></pre><p>Ïûê Í∑∏Îüº Ìä∏ÎûúÏä§ÌååÏùºÎü¨ ÌîåÎü¨Í∑∏Ïù∏ÏùÑ Î≥∏Í≤©Ï†ÅÏúºÎ°ú Î≥¥Í∏∞Ï†ÑÏóê Í∞ÑÎã®Ìïú ÏÑ§Î™ÖÎ∂ÄÌÑ∞ ÎìúÎ¶¨Í≤†ÏäµÎãàÎã§. ASTÎäî ÏΩîÎìúÎ•º ÌååÏä§ÌïòÏó¨ JSON Ìä∏Î¶¨ÏôÄ Í∞ôÏùÄ Íµ¨Î¨∏Ìä∏Î¶¨Î•º ÎßåÎì§Ïñ¥Ï§çÎãàÎã§. Ïó¨Í∏∞ÏÑú Ïö∞Î¶¨Îäî Ïñ¥Îñ§ Ìå®ÌÑ¥(Ïª®Ïä§Ìä∏Îü≠ÌÑ∞ÏïàÏóêÏÑúÏùò Ïï†Î°úÏö∞ÌéëÏÖò)ÏùÑ Ï∞æÏïÑÏÑú ÏõπÌå©Ïù¥ ÎåÄÏùëÍ∞ÄÎä•Ìïú ÌòïÏãùÏúºÎ°ú ÎßåÎì§Ïñ¥ Ï£ºÏñ¥ÏïºÌï©ÎãàÎã§.</p><p>Ïù¥Ïóê Î∞îÎ≤®ÏùÄ Visitor(Ïù¥Ìïò Î∞©Î¨∏Ïûê)ÎùºÎäî Í∞úÎÖêÏù¥ ÏûàÏñ¥ Ïù¥Î•º ÌôúÏö©ÌïòÎ©¥ ÎÖ∏Îìú ÌïòÎÇòÏî© ÏûêÏãù ÎÖ∏ÎìúÎ•º ÌôïÏù∏Ìï¥Í∞ÄÎ©∞ ÍπäÏàôÌïú Í≥≥ Íµ¨ÏÑùÍµ¨ÏÑùÍπåÏßÄ Ï†êÍ≤ÄÌï¥Ï§çÎãàÎã§. Í≥†Î°ú <code>if</code>Î¨∏Îì± Í∞ÅÏ¢Ö Î∏îÎ°ùÏúºÎ°ú ÏΩîÎìúÏùò ÍπäÏù¥Í∞Ä Ï†úÍ∞ÅÍ∞Å Ïùº Í≤ΩÏö∞Í∞Ä ÎßéÏúºÎØÄÎ°ú ÏßÅÏ†ëÏ†Å Ïù¥ÌÑ∞Î†àÏù¥ÌåÖÏùÑ ÌïòÎäî Í≤É Î≥¥Îã§ Î∞©Î¨∏ÏûêÎ•º ÌôúÏö©ÌïòÎäîÍ≤å Ï†ÅÌï©Ìï©ÎãàÎã§.</p><p>Í∑∏Î¶¨Í≥† ÎòêÎã§Î•∏ ÌäπÏßïÏúºÎ°ú Î∞©Î¨∏ÏûêÍ∞Ä Ìï¥Îãπ ÎÖ∏ÎìúÎ•º Ï∞æÏïòÏùÑ Îïå ÎèåÎ†§Ï£ºÎäîÍ±¥ ÎÖ∏Îìú ÏûêÏ≤¥Ïùò Ïù∏Ïä§ÌÑ¥Ïä§Í∞Ä ÏïÑÎãàÎùº <code>path</code>ÎùºÎäî(Node.jsÏùò <code>path</code>Í∞Ä ÏïÑÎãôÎãàÎã§.) ÌòïÏãùÏúºÎ°ú Í∞êÏã∏ÏÑú Ï§çÎãàÎã§. jQueryÏôÄ Ï°∞Í∏à ÎπÑÏä∑Ìïú ÎäêÎÇåÏù¥Í∏¥ÌïúÎç∞ Ìä∏ÎûúÏä§ÌååÏùºÎßÅÏùÑ ÏúÑÌïú Î™áÍ∞ÄÏßÄ Ìó¨ÌçºÏôÄ Ìä∏Î¶¨ÎÇ¥ ÏÉâÏù∏Í∏∞Îä•ÏùÑ Ï†úÍ≥µÌï¥Ï§çÎãàÎã§.</p><pre><code class="hljs language-js"><span class="hljs-comment">// Ïª®Ïä§Ìä∏Îü≠ÌÑ∞Ïóê ÏÑ†Ïñ∏Îêú Ïï†Î°úÏö∞ ÌéëÏÖòÏùÑ Í∞ôÏùÄ ÌòïÏãùÏúºÎ°ú Ìä∏ÎûúÏä§ÌååÏùºÏùÑ ÌñàÏùÑ Îïå,</span>
<span class="hljs-comment">// Î∞©Î¨∏ÏûêÎäî Ïù¥Î•º Ïù∏ÏãùÎ™ªÌïòÍ≥† Îã§Ïãú ÌïúÎ≤à Ìä∏ÎûúÏä§ÌååÏùºÏùÑ ÌïòÏó¨ Î¨¥ÌïúÌûà Ìä∏ÎûúÏä§ÌååÏùºÏùÑ ÌïòÎäî ÌòÑÏÉÅÏù¥ ÏÉùÍπÅÎãàÎã§.</span>
<span class="hljs-comment">// Í≥†Î°ú Ïã¨Î≥ºÏùÑ ÌôúÏö©ÌïòÏó¨ ÌïúÎ≤à Ìä∏ÎûúÏä§ÌååÏùºÌïú Î∂ÄÎ∂ÑÏóêÎäî Ïã¨Î≥ºÎ°ú ÌëúÏãúÎ•º Ìï¥ÎëêÏñ¥ Îã§Ïãú ÌïúÎ≤à Ìä∏ÎûúÏä§ÌååÏùºÌïú Î∂ÄÎ∂ÑÏùÄ Î¨¥ÏãúÌïòÍ≤å Ìï©ÎãàÎã§.</span>
<span class="hljs-comment">// Ìó®Ï†§Í≥º Í∑∏Î†àÌÖîÏùò ÎπµÍ∞ÄÎ£®Í∞ôÏùÄ Ï°¥Ïû¨Ïù¥Ï£†! üçûüçû</span>
<span class="hljs-keyword">const</span> replaced = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&#x27;replaced&#x27;</span>);

<span class="hljs-comment">// ÏÉùÎûµ</span>

<span class="hljs-comment">// ÍµêÏ≤¥Îê† Î©îÏÜåÎìúÎ•º ÎßåÎì§Ïñ¥Ï£ºÎäî Ìï®ÏàòÏûÖÎãàÎã§. Ï§ëÍ∞ÑÏóê ÏΩîÎìúÍ∞Ä ÏÉùÎûµÎêòÏóàÎäîÎç∞ tÎäî Babel typesÏûÖÎãàÎã§.</span>
<span class="hljs-keyword">const</span> buildNewAssignmentExpression = <span class="hljs-function">(<span class="hljs-params">t, classPropertyName, newMethodName, isAsync</span>) =&gt;</span> {
  <span class="hljs-keyword">let</span> returnExpression = t.callExpression(
    t.memberExpression(t.thisExpression(), newMethodName),
    [t.spreadElement(t.identifier(<span class="hljs-string">&#x27;params&#x27;</span>))]
  );

  <span class="hljs-keyword">if</span> (isAsync) {
    returnExpression = t.awaitExpression(returnExpression);
  }

  <span class="hljs-keyword">const</span> newArrowFunction = t.arrowFunctionExpression(
    [t.restElement(t.identifier(<span class="hljs-string">&#x27;params&#x27;</span>))],
    returnExpression,
    isAsync
  );
  <span class="hljs-keyword">const</span> left = t.memberExpression(t.thisExpression(), t.identifier(classPropertyName.name));

  <span class="hljs-keyword">const</span> replacement = t.assignmentExpression(<span class="hljs-string">&#x27;=&#x27;</span>, left, newArrowFunction);
  replacement[replaced] = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">return</span> replacement;
};

<span class="hljs-comment">// ÏÉùÎûµ</span>

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">plugin</span>(<span class="hljs-params">args</span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">visitor</span>: {

      <span class="hljs-comment">// ÏÉùÎûµ</span>

      <span class="hljs-comment">// Îß§Î≤à ÌÅ¥ÎûòÏä§Ïóê Î∞©Î¨∏Ìï† ÎïåÎßàÎã§ Ïù¥ Ìï®ÏàòÍ∞Ä Ïì∞Ïó¨ÏßëÎãàÎã§.</span>
      Class(classPath) {
        <span class="hljs-comment">// Ìå®Ïä§ ÎÇ¥Î∂Ä ÏÉâÏù∏ÏùÄ `get` Î©îÏÜåÎìúÎ•º ÏÇ¨Ïö©Ìï©ÎãàÎã§.</span>
        <span class="hljs-keyword">const</span> classBody = classPath.get(<span class="hljs-string">&#x27;body&#x27;</span>);

        classBody.get(<span class="hljs-string">&#x27;body&#x27;</span>).forEach(<span class="hljs-function"><span class="hljs-params">path</span> =&gt;</span> {
          <span class="hljs-keyword">if</span> (path.isClassProperty()) {
            <span class="hljs-comment">// ÏÉùÎûµ</span>
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// Î∞îÎîîÎ•º Ïù¥ÌÑ∞Î†àÏù¥Ìä∏ÏãúÏºú Ïª®Ïä§Ìä∏Îü≠ÌÑ∞Î•º Ï∞æÏäµÎãàÎã§. ÏïûÏÑú ÎßåÎì† Ïã¨Î≥ºÏùÑ ÌôúÏö©Ìï¥ Ïù¥ÎØ∏ Ìä∏ÎûúÏä§ÌååÏùºÎêú Î©îÏÜåÎìúÎäî Î¨¥ÏãúÌï©ÎãàÎã§.</span>
            <span class="hljs-keyword">if</span> (!path.node[replaced] &amp;&amp; path.node.kind === <span class="hljs-string">&#x27;constructor&#x27;</span>) {
              <span class="hljs-comment">// Ìä∏ÎûòÎ≤ÑÏä§Îäî PathÎÇ¥ÏóêÏÑú Îã§ÏãúÌïúÎ≤à Î∞©Î¨∏ÏûêÎ•º ÏÇ¨Ïö©Ìï† Ïàò ÏûàÍ≤å Ìï¥Ï§çÎãàÎã§. Ï†ÄÎäî Ïª®Ïä§Ìä∏Îü≠ÌÑ∞ÏïàÏùò Ïï†Î°úÏö∞ ÌéëÏÖòÏù¥ ÎåÄÏûÖÎêòÎäî Íµ¨Î¨∏ÏùÑ Ï∞æÍ∏∞ÏúÑÌï¥ ÏÇ¨Ïö©Ìï©ÎãàÎã§.</span>
              path.traverse({
                AssignmentExpression(exp) {
                  <span class="hljs-comment">// Ïù¥ÎØ∏ Ìä∏ÎûúÏä§ÌååÏùº ÎêòÏóàÎÇò, thisÏóê Î∞îÏù∏ÎìúÎêòÏóàÎÇò Îì±Îì±ÏùÑ Ï≤òÎ¶¨Ìï¥Ï§çÎãàÎã§.</span>
                  <span class="hljs-keyword">if</span> (!exp.node[replaced]
                    &amp;&amp; exp.node.left.type === <span class="hljs-string">&#x27;MemberExpression&#x27;</span>
                    &amp;&amp; exp.node.left.object.type === <span class="hljs-string">&#x27;ThisExpression&#x27;</span>
                    &amp;&amp; exp.node.right.type === <span class="hljs-string">&#x27;ArrowFunctionExpression&#x27;</span>
                  ) {
                    <span class="hljs-keyword">const</span> key = exp.node.left.property;
                    <span class="hljs-keyword">const</span> node = exp.node.right;

                    <span class="hljs-keyword">const</span> isAsync = node.async;
                    <span class="hljs-keyword">const</span> params = node.params;
                    <span class="hljs-keyword">const</span> newIdentifier = t.identifier(<span class="hljs-string">`__<span class="hljs-subst">${key.name}</span>__REACT_HOT_LOADER__`</span>);

                    <span class="hljs-keyword">const</span> newMethodBody = node.body.type === <span class="hljs-string">&#x27;BlockStatement&#x27;</span> ?
                      node.body :
                      t.blockStatement([t.returnStatement(node.body)]);

                    <span class="hljs-keyword">const</span> newMethod = t.classMethod(<span class="hljs-string">&#x27;method&#x27;</span>, newIdentifier, params, newMethodBody);
                    newMethod.async = isAsync;
                    newMethod[replaced] = <span class="hljs-literal">true</span>;
                    <span class="hljs-comment">// ÌÅ¥ÎûòÏä§Î©îÏÜåÎìúÎ°ú ÏÉàÎ°≠Í≤å ÎßåÎì§Ïñ¥ Î∞îÍπ•ÏúºÎ°ú Í∫ºÎÇ¥Ï§çÎãàÎã§.</span>
                    path.insertAfter(newMethod);

                    <span class="hljs-comment">// Ïª®Ïä§Ìä∏Îü≠ÌÑ∞ÏïàÏùò Î©îÏÜåÎìúÎäî Î∞îÍπ•ÏúºÎ°ú Í∫ºÎÇ∏ Î©îÏÜåÎìúÎ•º Î∂ÄÎ•¥Í≤å Ìï©ÎãàÎã§.</span>
                    exp
                      .replaceWith(buildNewAssignmentExpression(t, key, newIdentifier, isAsync));
                  }
                },
              });
            }
          }
        });
      },
    },
  };
};
</code></pre><p>Ïù¥ÏÉÅÏûÖÎãàÎã§. Î∞îÎ≤®Ïùò ÌååÏã±ÏõêÎ¶¨Îäî ÏïÑÏßÅ Ï†ÄÎèÑ Ïûò Î™®Î•¥Í≤†ÏßÄÎßå, Ïù¥Î≤à Í∏∞ÌöåÎ°ú Ïù¥ÎØ∏ ÌååÏã±Îêú ASTÎ•º Ìä∏ÎûúÏä§ÌååÏùºÌïòÎäîÍ±¥ Í∑∏Î†áÍ≤å Ïñ¥Î†µÏßÄ ÏïäÏïÑÏßÑ ÎäêÎÇåÏù¥ Îì≠ÎãàÎã§. :sunglasses::sunglasses:</p></div><footer class="Box-sc-1eapbbj-0 kIQyjW"><div class="Box-sc-1eapbbj-0 Flex-ikisgz-0 duzMXu"><div color="#777" class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 AbyuT">¬© 2019</div><a color="blue" href="/about" class="Link-sc-6f9keh-0 epuZnG">Junyoung Choi</a></div><div color="#777" class="Box-sc-1eapbbj-0 Text-sc-10chyw1-0 lnSrVR">All source codes are available in<!-- --> <a href="https://github.com/Rokt33r/blog" target="_blank" color="blue" class="Link-sc-6f9keh-0 eVchTb"><svg viewBox="0 0 24 24" style="width:1em;height:1em" role="presentation"><path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z"></path></svg> Rokt33r/blog</a></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"dataManager":"[]","props":{"pageProps":{}},"page":"/posts/try-to-build-babel-plugin","query":{},"buildId":"hJFE1lH2cjGqLP7DAhCBs","nextExport":true}</script><script async="" data-next-page="/posts/try-to-build-babel-plugin" src="/_next/static/hJFE1lH2cjGqLP7DAhCBs/pages/posts/try-to-build-babel-plugin.js"></script><script async="" data-next-page="/_app" src="/_next/static/hJFE1lH2cjGqLP7DAhCBs/pages/_app.js"></script><script src="/_next/static/runtime/webpack-035ac2b14bde147cb4a8.js" async=""></script><script src="/_next/static/chunks/commons.dadd45e9201230d990bd.js" async=""></script><script src="/_next/static/runtime/main-7ca00c6bb257c339c190.js" async=""></script></body></html>